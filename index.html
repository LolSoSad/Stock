<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>รายการนำเข้าสต๊อก</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<style>
body { background-color: #f8f9fa; font-family: 'Sarabun', sans-serif; padding: 20px; }
.main-container { background: #fff; border-radius: 12px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
.title-header { color: #ff6b00; font-size: 28px; font-weight: bold; margin-bottom: 25px; display: flex; align-items: center; }
.title-header::before { content: ""; width: 6px; height: 28px; background: #ff6b00; margin-right: 15px; border-radius: 3px; }

.table-responsive-wrapper { overflow-x: auto; border-radius: 10px; border: 1px solid #f0f0f0; }
.table { min-width: 1600px; margin-bottom: 0; vertical-align: middle; }
.table thead th { background: #fff; padding: 18px; font-weight: 600; color: #333; border-bottom: 2px solid #f8f9fa; }
.table tbody td { padding: 20px 15px; border-bottom: 1px solid #f8f9fa; }

.check-card { background: #fdfdfd; border: 1px solid #f1f1f1; border-radius: 12px; padding: 15px; min-width: 200px; transition: 0.2s; }
.check-card.active { border: 1px solid #28a745; background: #f0fff4; }

.form-check { margin-bottom: 8px; }
.form-check-label { font-size: 13px; color: #000; cursor: pointer; }

.card-muted{
    background: #f8fafc;
    border: 1px solid #e5e7eb;
    opacity: 0.6;
}

.card-muted .form-check-label{
    color: #9ca3af;
}

.card-muted .form-check-input{
    accent-color: #cbd5e1;
}
.column-filter{
    border-radius: 10px;
    height: 42px;
    border: 1px solid #e2e8f0;
    background: #f8fafc;
    font-size: 14px;
}

.column-filter:focus{
    border-color: #ff6b00;
    box-shadow: 0 0 0 3px rgba(255,107,0,.15);
    background: #fff;
}
.btn-search{
    background: #1e88e5;
    color: #fff;
    border-radius: 8px;
    font-size: 14px;
    height: 42px;
    border: none;
    transition: 0.2s;
}

.btn-search:hover{
    background: #1565c0;
}

.btn-reset{
    background: #e53935;
    color: #fff;
    border-radius: 8px;
    font-size: 14px;
    height: 42px;
    border: none;
    transition: 0.2s;
}

.btn-reset:hover{
    background: #c62828;
}

.action-group { display: flex; gap: 10px; justify-content: center; }
.btn-status { width: 85px; padding: 10px 0; border-radius: 10px; border: none; color: white; font-size: 13px; display: flex; flex-direction: column; align-items: center; gap: 4px; transition: 0.2s; }
.btn-confirm { background-color: #28a745; }
.btn-reject { background-color: #dc3545; }

.search-control { border-radius: 20px; background: #f1f3f5; border: none; padding-left: 40px; width: 300px; }
</style>
</head>

<body>

<div class="main-container">
<div class="title-header">รายการนำเข้าสต๊อก</div>
<div class="check-card mb-3">
<div class="row g-3">

    <div class="col-md-2">
        <input type="text" class="form-control column-filter"
               data-column="1"
               placeholder="ค้นหา โมเดล">
    </div>

    <div class="col-md-2">
        <input type="text" class="form-control column-filter"
               data-column="2"
               placeholder="ค้นหา Model Info">
    </div>

    <div class="col-md-2">
        <input type="text" class="form-control column-filter"
               data-column="3"
               placeholder="ค้นหา ประเภทผลิตภัณฑ์">
    </div>
    <div class="col-md-2 d-flex gap-2">

        <button id="btnSearch" class="btn btn-search w-60">
            <i class="bi bi-search me-1"></i> ค้นหา
        </button>

        <button id="btnReset" class="btn btn-reset w-60">
            <i class="bi bi-arrow-clockwise me-1"></i> รีเซ็ต
        </button>

    </div>
</div>
</div>


<div class="table-responsive-wrapper">
<table class="table">
<thead>
<tr>
<th>No.</th>
<th>โมเดล</th>
<th>Model Info</th>
<th>ประเภทผลิตภัณฑ์</th>
<th>Admin</th>
<th>WH</th>
<th>PDI Assy</th>
<th>PDI Qc</th>
<th>การจัดการ</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td><strong>LPE</strong></td>
<td>987654</td>
<td>Powered Pallet Trucks</td>

<!-- CARD TEMPLATE -->
<td>
<div class="check-card">
<div class="form-check mb-2 border-bottom pb-2">
<input type="checkbox" class="form-check-input check-all">
<label class="form-check-label fw-bold text-primary">เลือกทั้งหมด</label>
</div>

<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">รถยก : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">กล่องควบคุม : 123456</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">เครื่องชาร์จ : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">แบตเตอรี่ : 987654</label></div>
</div>
</td>

<td>
<div class="check-card card-muted">
<div class="form-check mb-2 border-bottom pb-2">
<input type="checkbox" class="form-check-input check-all">
<label class="form-check-label fw-bold text-primary">เลือกทั้งหมด</label>
</div>

<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">รถยก : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">กล่องควบคุม : 123456</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">เครื่องชาร์จ : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">แบตเตอรี่ : 987654</label></div>
</div>
</td>

<td>
<div class="check-card card-muted">
<div class="form-check mb-2 border-bottom pb-2">
<input type="checkbox" class="form-check-input check-all">
<label class="form-check-label fw-bold text-primary">เลือกทั้งหมด</label>
</div>

<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">รถยก : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">กล่องควบคุม : 123456</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">เครื่องชาร์จ : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">แบตเตอรี่ : 987654</label></div>
</div>
</td>

<td>
<div class="check-card card-muted">
<div class="form-check mb-2 border-bottom pb-2">
<input type="checkbox" class="form-check-input check-all">
<label class="form-check-label fw-bold text-primary">เลือกทั้งหมด</label>
</div>

<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">รถยก : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">กล่องควบคุม : 123456</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">เครื่องชาร์จ : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">แบตเตอรี่ : 987654</label></div>
</div>
</td>

<td>
<div class="action-group">
<button class="btn-status btn-confirm btn-save">บันทึก</button>
<button class="btn-status btn-reject btn-reject-action">ปฏิเสธ</button>

</div>
</td>

</tr>
</tbody>
<tbody>
<tr>
<td>2</td>
<td><strong>LHE</strong></td>
<td>LHE150</td>
<td>Powered Pallet Trucks</td>

<!-- CARD TEMPLATE -->
<td>
<div class="check-card">
<div class="form-check mb-2 border-bottom pb-2">
<input type="checkbox" class="form-check-input check-all">
<label class="form-check-label fw-bold text-primary">เลือกทั้งหมด</label>
</div>

<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">รถยก : LHE150</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">กล่องควบคุม : 123456</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">เครื่องชาร์จ : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">แบตเตอรี่ : 987654</label></div>
</div>
</td>

<td>
<div class="check-card card-muted">
<div class="form-check mb-2 border-bottom pb-2">
<input type="checkbox" class="form-check-input check-all">
<label class="form-check-label fw-bold text-primary">เลือกทั้งหมด</label>
</div>

<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">รถยก : LHE150</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">กล่องควบคุม : 123456</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">เครื่องชาร์จ : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">แบตเตอรี่ : 987654</label></div>
</div>
</td>

<td>
<div class="check-card card-muted">
<div class="form-check mb-2 border-bottom pb-2">
<input type="checkbox" class="form-check-input check-all">
<label class="form-check-label fw-bold text-primary">เลือกทั้งหมด</label>
</div>

<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">รถยก : LHE150</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">กล่องควบคุม : 123456</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">เครื่องชาร์จ : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">แบตเตอรี่ : 987654</label></div>
</div>
</td>

<td>
<div class="check-card card-muted">
<div class="form-check mb-2 border-bottom pb-2">
<input type="checkbox" class="form-check-input check-all">
<label class="form-check-label fw-bold text-primary">เลือกทั้งหมด</label>
</div>

<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">รถยก : LHE150</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">กล่องควบคุม : 123456</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">เครื่องชาร์จ : 987654</label></div>
<div class="form-check"><input type="checkbox" class="form-check-input item-check"><label class="form-check-label">แบตเตอรี่ : 987654</label></div>
</div>
</td>

<td>
<div class="action-group">
<button class="btn-status btn-confirm btn-save">บันทึก</button>
<button class="btn-status btn-reject btn-reject-action">ปฏิเสธ</button>
</div>
</td>

</tr>
</tbody>

</table>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
document.querySelectorAll(".check-card").forEach(card => {

const checkAll = card.querySelector(".check-all");
const items = card.querySelectorAll(".item-check");

if(!checkAll) return;

checkAll.addEventListener("change", function () {
items.forEach(item => item.checked = this.checked);
updateState();
});

items.forEach(item => {
item.addEventListener("change", function () {
const total = items.length;
const checked = card.querySelectorAll(".item-check:checked").length;

checkAll.checked = total === checked;
checkAll.indeterminate = checked > 0 && checked < total;

updateState();
});
});

function updateState(){
const total = items.length;
const checked = card.querySelectorAll(".item-check:checked").length;

if(total === checked){
card.classList.add("active");
}else{
card.classList.remove("active");
}
}

});
document.querySelectorAll(".check-card.card-muted").forEach(card => {
    card.querySelectorAll("input[type='checkbox']").forEach(cb => {
        cb.disabled = true;
    });
});
// ===== Column Filter =====
document.querySelectorAll(".column-filter").forEach(input => {
    input.addEventListener("keyup", filterTable);
    input.addEventListener("change", filterTable);
});

function filterTable() {
    const rows = document.querySelectorAll("tbody tr");

    rows.forEach(row => {
        let show = true;

        document.querySelectorAll(".column-filter").forEach(input => {
            const colIndex = input.getAttribute("data-column");
            const filterValue = input.value.toLowerCase();
            const cellText = row.children[colIndex].innerText.toLowerCase();

            if (filterValue && !cellText.includes(filterValue)) {
                show = false;
            }
        });

        row.style.display = show ? "" : "none";
    });
}
// ===== ปุ่มบันทึก =====
document.querySelectorAll(".btn-save").forEach(btn => {
    btn.addEventListener("click", function () {

        Swal.fire({
            icon: "success",
            title: "บันทึกสำเร็จ",
            text: "ข้อมูลถูกบันทึกเรียบร้อยแล้ว",
            confirmButtonColor: "#1e88e5",
            confirmButtonText: "ตกลง"
        });

    });
});


// ===== ปุ่มปฏิเสธ =====
document.querySelectorAll(".btn-reject-action").forEach(btn => {
    btn.addEventListener("click", function () {

        Swal.fire({
            title: "กรอกหมายเหตุการปฏิเสธ",
            input: "textarea",
            inputPlaceholder: "กรอกเหตุผลที่ปฏิเสธ...",
            inputAttributes: {
                'aria-label': 'หมายเหตุการปฏิเสธ'
            },
            showCancelButton: true,
            confirmButtonText: "ยืนยัน",
            cancelButtonText: "ยกเลิก",
            confirmButtonColor: "#e53935",
            inputValidator: (value) => {
                if (!value) {
                    return "กรุณากรอกหมายเหตุการปฏิเสธ";
                }
            }
        }).then((result) => {
            if (result.isConfirmed) {

                Swal.fire({
                    icon: "warning",
                    title: "ปฏิเสธเรียบร้อย",
                    text: "เหตุผล: " + result.value,
                    confirmButtonColor: "#1e88e5"
                });

                // ตรงนี้สามารถส่งค่าไป backend ได้
                console.log("Reject Reason:", result.value);
            }
        });

    });
});

</script>

</body>
</html>
